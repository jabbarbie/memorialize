import{r,b as O,j as e,Y as W}from"./app-CgxRhOiX.js";import{B as l,Y as i,A as B}from"./AuthenticatedLayout-MHcO8w9Z.js";/* empty css             */import{f as H}from"./helper-BpdOWQTc.js";function $({auth:_,note:d}){const n=r.useRef(null),[o,k]=r.useState(d.name),[y,g]=r.useState(!1),[u,f]=r.useState(!0),[U,b]=r.useState(0),[c,m]=r.useState(""),[x,w]=r.useState("62895615912993"),[h,N]=r.useState("saya hari ini"),S=s=>{b(a=>a+1),g(!0),k(s.target.value)};r.useEffect(()=>{console.log("lastWord",c),c=="Escape"&&(f(!0),v()),c=="Enter"&&f(!1)},[c]);const j=s=>{s.key==="Escape"&&m("Escape"),s.key==="Enter"&&m("Enter")},E=()=>{n&&n.current&&(n.current.focus(),n.current.selectionStart=n.current.value.length,n.current.selectionEnd=n.current.value.length)};r.useEffect(()=>{u||E()},[u]),r.useEffect(()=>(window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}),[]);const v=()=>{if(y){const s={note:d.id,name:o};O.post(`/${d.id}/store_note`,s).then(a=>{l.success("Saved",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:0,theme:"dark",transition:i}),g(!1)})}},C=()=>{if(!o||o.length==0)return[];let s=!1;console.log(o);let a=[];return o.split(`
`).map((t,p)=>{console.log(p,t,s),t.trim().startsWith("#")?(console.log("ada prefix scrum",t.trim().startsWith("#")),console.log("isinya",t.slice(1).toUpperCase()),t.slice(1).toUpperCase().trim()=="SCRUM"&&(console.log(t.slice(1).toUpperCase()),s=!0)):t.trim().length>0?s&&(console.log("lanjut",t),a.push(t+`
`),s=!0):(console.log("gagal",t),s=!1)}),console.log("finish",a),a},P=()=>{const s=C();if(s.length>0){s.unshift(h+` : 
`);const a=s.join(""),t=encodeURIComponent(a),p=`https://wa.me/${x}?text=${t}`;window.open(p)}else console.log(s),l.error("Pastikan format scrum benar",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:0,theme:"dark",transition:i})},T=()=>{const s=C();if(s.length>0){s.unshift(h+` : 
`);const a=s.join("");navigator.clipboard.writeText(a).then(()=>{l.success("Copied",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:0,theme:"dark",transition:i})}).catch(t=>{l.error("Failed",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:0,theme:"dark",transition:i})})}else l.error("Pastikan format scrum benar",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:0,theme:"dark",transition:i})};return e.jsxs(B,{user:_.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(W,{title:"Dashboard"}),e.jsxs("div",{id:"home__wrapper",children:[e.jsx("nav",{className:"home__nav d-none",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{children:"D"})}),e.jsx("li",{children:e.jsx("a",{children:"P"})}),e.jsx("li",{children:e.jsx("a",{children:"S"})}),e.jsx("li",{children:e.jsx("a",{children:"N"})})]})}),e.jsxs("div",{className:"home__aside",children:[e.jsx("div",{className:"link__title",children:e.jsx("h3",{children:"Scrum"})}),e.jsxs("div",{className:"link__group",children:[e.jsx("p",{children:"Prefix"}),e.jsx("input",{type:"text",value:h,onChange:s=>N(s.currentTarget.value)})]}),e.jsxs("div",{className:"link__group",children:[e.jsx("p",{children:"Whatsapp Number"}),e.jsx("input",{type:"text",value:x,onChange:s=>w(s.currentTarget.value)})]}),e.jsxs("div",{className:"link__group_row",style:{display:"none"},children:[e.jsx("p",{children:"Project hari ini"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Lorem"}),e.jsx("li",{children:"Ipsum"}),e.jsx("li",{children:"Tralala"})]})]}),e.jsx("button",{onClick:P,children:"Send To Whatsapp"}),e.jsx("button",{onClick:T,className:"mt-3",children:"Copy Text"})]}),e.jsx("div",{className:"home__main",children:u?e.jsx("div",{id:"display",className:"textarea__preview",children:H(o)}):e.jsx("textarea",{ref:n,className:"",spellCheck:"false",value:o,autoFocus:!0,onChange:S,onBlur:v})})]})]})}export{$ as default};
